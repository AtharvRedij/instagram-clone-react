{"version":3,"sources":["components/CommonModal.js","firebase.js","components/SignUpModal.js","components/SignInModal.js","components/Post.js","components/ImageUpload.js","App.js","index.js"],"names":["getModalStyle","top","left","transform","useStyles","makeStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","CommonModal","open","setOpen","children","classes","React","useState","modalStyle","Modal","onClose","style","className","src","alt","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","db","firestore","auth","storage","SignUpModal","username","setUsername","email","setEmail","password","setPassword","Input","type","placeholder","value","onChange","e","target","fullWidth","Button","onClick","event","preventDefault","createUserWithEmailAndPassword","then","authUser","user","updateProfile","displayName","catch","error","console","log","message","SignInModal","signInWithEmailAndPassword","Post","postId","caption","imageUrl","signedInUser","comments","setComments","comment","setComment","useEffect","unsubscribeFromComments","collection","BASE_PROJECT_NAME","doc","orderBy","onSnapshot","snapshot","docs","map","data","Avatar","add","text","timestamp","FieldValue","serverTimestamp","index","key","ImageUpload","setCaption","image","setImage","progress","setProgress","max","files","ref","name","put","on","currentProgress","Math","round","bytesTransferred","totalBytes","child","getDownloadURL","App","posts","setPosts","signInOpen","setSignInOpen","signUpOpen","setSignUpOpen","setUser","unsubscribeFromAuth","onAuthStateChanged","id","signOut","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ee0c0757.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\n\r\nfunction getModalStyle() {\r\n  const top = 50;\r\n  const left = 50;\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: \"absolute\",\r\n    width: 400,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: \"2px solid #000\",\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n}));\r\n\r\nconst CommonModal = ({ open, setOpen, children }) => {\r\n  const classes = useStyles();\r\n  const [modalStyle] = React.useState(getModalStyle);\r\n\r\n  return (\r\n    <Modal open={open} onClose={() => setOpen(false)}>\r\n      <div style={modalStyle} className={classes.paper}>\r\n        <form className=\"common-modal\">\r\n          <center>\r\n            <img\r\n              src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\"\r\n              alt=\"Instagram Logo\"\r\n            />\r\n          </center>\r\n\r\n          {children}\r\n        </form>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default CommonModal;\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/storage\";\r\n\r\nexport const firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID,\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const db = firebase.firestore();\r\nexport const auth = firebase.auth();\r\nexport const storage = firebase.storage();\r\n\r\nexport default firebase;\r\n\r\nconst BASE_PROJECT_NAME = \"instagram-clone-react__\";\r\n\r\nexport const POSTS_COLLECTION_NAME = BASE_PROJECT_NAME + \"posts\";\r\nexport const POST_IMAGE_STORAGE_NAME = BASE_PROJECT_NAME + \"images\";\r\n","import React, { useState } from \"react\";\r\nimport { Input, Button } from \"@material-ui/core\";\r\nimport CommonModal from \"./CommonModal\";\r\nimport { auth } from \"./../firebase\";\r\n\r\nconst SignUpModal = ({ open, setOpen }) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const signUp = (event) => {\r\n    event.preventDefault();\r\n\r\n    auth\r\n      .createUserWithEmailAndPassword(email, password)\r\n      .then((authUser) =>\r\n        authUser.user.updateProfile({\r\n          displayName: username,\r\n        })\r\n      )\r\n      .catch((error) => console.log(error.message));\r\n\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <CommonModal open={open} setOpen={setOpen}>\r\n      <Input\r\n        type=\"text\"\r\n        placeholder=\"username\"\r\n        value={username}\r\n        onChange={(e) => setUsername(e.target.value)}\r\n        fullWidth={true}\r\n      />\r\n\r\n      <Input\r\n        type=\"email\"\r\n        placeholder=\"email\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        fullWidth={true}\r\n      />\r\n\r\n      <Input\r\n        type=\"password\"\r\n        placeholder=\"password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        fullWidth={true}\r\n      />\r\n\r\n      <Button onClick={signUp}>Sign Up</Button>\r\n    </CommonModal>\r\n  );\r\n};\r\n\r\nexport default SignUpModal;\r\n","import React, { useState } from \"react\";\r\nimport { Button, Input } from \"@material-ui/core\";\r\nimport CommonModal from \"./CommonModal\";\r\nimport { auth } from \"../firebase\";\r\n\r\nconst SignInModal = ({ open, setOpen }) => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const signIn = (event) => {\r\n    event.preventDefault();\r\n\r\n    auth\r\n      .signInWithEmailAndPassword(email, password)\r\n      .catch((error) => console.log(error.message));\r\n\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <CommonModal open={open} setOpen={setOpen}>\r\n      <Input\r\n        type=\"email\"\r\n        placeholder=\"email\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        fullWidth={true}\r\n      />\r\n\r\n      <Input\r\n        type=\"password\"\r\n        placeholder=\"password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        fullWidth={true}\r\n      />\r\n\r\n      <Button onClick={signIn}>Sign In</Button>\r\n    </CommonModal>\r\n  );\r\n};\r\n\r\nexport default SignInModal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport { Input, Button } from \"@material-ui/core\";\r\nimport firebase, { db, POSTS_COLLECTION_NAME } from \"../firebase\";\r\nimport \"./Post.css\";\r\n\r\nconst Post = ({ postId, username, caption, imageUrl, signedInUser }) => {\r\n  const [comments, setComments] = useState([]);\r\n  const [comment, setComment] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let unsubscribeFromComments;\r\n\r\n    if (postId) {\r\n      unsubscribeFromComments = db\r\n        .collection(POSTS_COLLECTION_NAME)\r\n        .doc(postId)\r\n        .collection(\"comments\")\r\n        .orderBy(\"timestamp\", \"desc\")\r\n        .onSnapshot((snapshot) => {\r\n          setComments(snapshot.docs.map((doc) => doc.data()));\r\n        });\r\n    }\r\n\r\n    return () => {\r\n      unsubscribeFromComments();\r\n    };\r\n  }, [postId]);\r\n\r\n  const postComment = (event) => {\r\n    event.preventDefault();\r\n\r\n    db.collection(POSTS_COLLECTION_NAME)\r\n      .doc(postId)\r\n      .collection(\"comments\")\r\n      .add({\r\n        text: comment,\r\n        username: signedInUser.displayName,\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n      });\r\n\r\n    setComment(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      <div className=\"post__header\">\r\n        <Avatar\r\n          className=\"post__avatar\"\r\n          alt={username}\r\n          src=\"/broken-image.jpg\"\r\n        />\r\n        <h3>{username}</h3>\r\n      </div>\r\n\r\n      <img className=\"post__image\" src={imageUrl} alt=\"post\" />\r\n\r\n      <h4 className=\"post__text\">\r\n        <strong>{username}</strong>\r\n        {caption}\r\n      </h4>\r\n\r\n      {signedInUser ? (\r\n        <form>\r\n          <Input\r\n            fullWidth={true}\r\n            type=\"text\"\r\n            placeholder=\"Enter a comment\"\r\n            value={comment}\r\n            onChange={(e) => setComment(e.target.value)}\r\n          />\r\n\r\n          <Button onClick={postComment}>Post</Button>\r\n        </form>\r\n      ) : null}\r\n\r\n      <div className=\"post__comments-container\">\r\n        {comments.map((comment, index) => (\r\n          <p key={index}>\r\n            <strong>{comment.username}</strong> {comment.text}\r\n          </p>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n","import React, { useState } from \"react\";\r\nimport { Input, Button } from \"@material-ui/core\";\r\nimport firebase, {\r\n  storage,\r\n  db,\r\n  POST_IMAGE_STORAGE_NAME,\r\n  POSTS_COLLECTION_NAME,\r\n} from \"../firebase\";\r\nimport \"./ImageUpload.css\";\r\n\r\nconst ImageUpload = ({ username }) => {\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [image, setImage] = useState(null);\r\n  const [progress, setProgress] = useState(0);\r\n\r\n  const handleChange = (event) => {\r\n    if (event.target.files[0]) {\r\n      setImage(event.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const handleUpload = () => {\r\n    const uploadTask = storage\r\n      .ref(`${POST_IMAGE_STORAGE_NAME}/${image.name}`)\r\n      .put(image);\r\n\r\n    uploadTask.on(\r\n      \"state_changed\",\r\n      (snapshot) => {\r\n        const currentProgress = Math.round(\r\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n        );\r\n\r\n        setProgress(currentProgress);\r\n      },\r\n      (error) => console.log(error),\r\n      () => {\r\n        storage\r\n          .ref(POST_IMAGE_STORAGE_NAME)\r\n          .child(image.name)\r\n          .getDownloadURL()\r\n          .then((imageUrl) => {\r\n            db.collection(POSTS_COLLECTION_NAME).add({\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n              caption,\r\n              imageUrl,\r\n              username,\r\n            });\r\n\r\n            setProgress(0);\r\n            setCaption(\"\");\r\n            setImage(null);\r\n          });\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"image-upload\">\r\n      <progress value={progress} max=\"100\" />\r\n      <Input\r\n        type=\"text\"\r\n        onChange={(event) => setCaption(event.target.value)}\r\n        placeholder=\"Enter a caption\"\r\n      />\r\n      <Input type=\"file\" onChange={handleChange} />\r\n\r\n      <Button onClick={handleUpload}>Upload</Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUpload;\r\n","import React, { useState, useEffect } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport SignUpModal from \"./components/SignUpModal\";\nimport SignInModal from \"./components/SignInModal\";\nimport Post from \"./components/Post\";\nimport { db, auth, POSTS_COLLECTION_NAME } from \"./firebase\";\nimport ImageUpload from \"./components/ImageUpload\";\nimport \"./App.css\";\n\nconst App = () => {\n  const [posts, setPosts] = useState([]);\n  const [signInOpen, setSignInOpen] = useState(false);\n  const [signUpOpen, setSignUpOpen] = useState(false);\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const unsubscribeFromAuth = auth.onAuthStateChanged((authUser) => {\n      if (authUser) {\n        setUser(authUser);\n      } else {\n        setUser(null);\n      }\n    });\n\n    return () => {\n      unsubscribeFromAuth();\n    };\n  }, [user]);\n\n  useEffect(() => {\n    db.collection(POSTS_COLLECTION_NAME)\n      .orderBy(\"timestamp\", \"desc\")\n      .onSnapshot((snapshot) => {\n        setPosts(\n          snapshot.docs.map((doc) => ({\n            id: doc.id,\n            ...doc.data(),\n          }))\n        );\n      });\n  }, []);\n\n  return (\n    <div className=\"app\">\n      <SignInModal open={signInOpen} setOpen={setSignInOpen} />\n      <SignUpModal open={signUpOpen} setOpen={setSignUpOpen} />\n      <div className=\"app__header\">\n        <img\n          src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\"\n          alt=\"Instagram Logo\"\n        />\n\n        {user ? (\n          <Button onClick={() => auth.signOut()}>Sign Out</Button>\n        ) : (\n          <div className=\"app__sign-in-container\">\n            <Button onClick={() => setSignInOpen(true)}>Sign In</Button>\n            <Button onClick={() => setSignUpOpen(true)}>Sign Up</Button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"app__posts\">\n        {posts.map(({ id, username, caption, imageUrl }) => (\n          <Post\n            key={id}\n            postId={id}\n            username={username}\n            caption={caption}\n            imageUrl={imageUrl}\n            signedInUser={user}\n          />\n        ))}\n      </div>\n\n      {user ? (\n        <ImageUpload username={user.displayName} />\n      ) : (\n        <h3 className=\"app_login-to-upload-message\">Login to upload</h3>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}